<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="nerd.ico">
    <title>Imusic</title>
    <style>
        @import url('112233.css');
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <img src="musicwt.png" alt="Imusic" class="loading-image">
        </div>
    </div>
    <div class="container">
        <div class="left-panel">
            <div class="search-container">
                <input type="text" class="search-bar" id="searchBar" placeholder="搜索(api问题正在修复暂时使用第三方)">
            </div>
            <div class="album-cover" id="albumCover">
                <div class="album-cover-content">
                    <img id="coverImage" src="" alt="专辑封面">
                    <span id="coverPlaceholder" style="color: var(--text-weak); font-size: 18px;">暂无封面</span>
                </div>
            </div>

            <div class="time-slider">
                <span class="time-label" id="currentTime">0:00</span>
                <input type="range" id="timeSlider" min="0" max="100" value="0">
                <span class="time-label" id="durationTime">0:00</span>
            </div>

            <div class="music-info">
                <h2 id="songTitle"><b>暂无歌曲</b></h2>
                <p id="artistName">未知的音乐人</p>
            </div>
            <div class="audio-controls">
                <button class="play-btn" id="playBtn">播放</button>
                <button class="mode-btn" id="modeBtn" title="播放模式">列表循环</button>
                <div class="progress-bar" id="progressBar">
                    <div class="progress" id="progress"></div>
                </div>
            </div>
            <audio id="audioPlayer" class="hidden"></audio>
        </div>

        <div class="right-panel">
            <div class="lyrics-container">
                <div class="lyrics" id="lyrics">
                    <p>暂无歌词</p>
                </div>
            </div>
        </div>
    </div>

    <div class="top-buttons">
        <button class="settings-btn" id="settingsBtn">设置</button>
        <button class="playlist-btn" id="playlistBtn">播放列表</button>
    </div>

    <div class="controls">
        <button class="floating-action-btn" onclick="toggleUploadMenu()">+</button>
        <div class="action-buttons-container">
            <button class="upload-btn" id="uploadBtn">上传音乐</button>
            <button class="upload-btn" id="addUrlBtn">添加URL</button>
            <button class="upload-btn" id="uploadLyricsBtn">上传歌词</button>
            <button class="upload-btn" id="uploadCoverBtn">上传封面</button>
        </div>
    </div>
    
    <script>
        function toggleUploadMenu() {
            const fab = document.querySelector('.floating-action-btn');
            const container = document.querySelector('.action-buttons-container');
            
            fab.classList.toggle('active');
            
            if (fab.classList.contains('active')) {
                container.style.opacity = '1';
                container.style.visibility = 'visible';
                container.style.transform = 'translateY(0)';
            } else {
                container.style.opacity = '0';
                container.style.visibility = 'hidden';
                container.style.transform = 'translateY(20px)';
            }
        }
        document.addEventListener('click', function(event) {
            const fab = document.querySelector('.floating-action-btn');
            const container = document.querySelector('.action-buttons-container');
            const controls = document.querySelector('.controls');
            
            if (!controls.contains(event.target) && fab.classList.contains('active')) {
                fab.classList.remove('active');
                container.style.opacity = '0';
                container.style.visibility = 'hidden';
                container.style.transform = 'translateY(20px)';
            }
        });
        document.querySelectorAll('.action-buttons-container .upload-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });
    </script>

    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <h3>上传文件</h3>
            <div class="file-input">
                <label>选择音乐文件（可多选）:</label>
                <input type="file" id="musicFile" accept="audio/*" multiple>
            </div>
            <button class="close-btn" onclick="closeModal('uploadModal')">关闭</button>
        </div>
    </div>
    <div class="modal" id="lyricsModal">
        <div class="modal-content">
            <h3>上传歌词</h3>
            <div class="file-input">
                <label>选择歌词文件 (LRC/TXT):</label>
                <input type="file" id="lyricsFile" accept=".lrc,.txt">
            </div>
            <button class="close-btn" onclick="closeModal('lyricsModal')">关闭</button>
        </div>
    </div>
    <div class="modal" id="coverModal">
        <div class="modal-content">
            <h3>上传封面</h3>
            <div class="file-input">
                <label>选择图片文件:</label>
                <input type="file" id="coverFile" accept="image/*">
            </div>
            <button class="close-btn" onclick="closeModal('coverModal')">关闭</button>
        </div>
    </div>
    <div class="modal" id="urlModal">
        <div class="modal-content">
            <h3>添加音乐URL</h3>
            <div class="url-input-section">
                <label for="musicUrl">音乐URL:</label>
                <input type="text" id="musicUrl" placeholder="输入音乐URL...">
                <label for="musicName">歌曲名称 (可选):</label>
                <input type="text" id="musicName" placeholder="输入歌曲名称...">
                <button class="add-btn" id="addSingleUrlBtn">添加单首</button>
            </div>
            <div class="url-input-section" style="margin-top: 20px;">
                <label for="batchUrls">批量添加URL (每行一个):</label>
                <textarea id="batchUrls" rows="5" placeholder="https://example.com/song1.mp3
https://example.com/song2.mp3
..."></textarea>
                <button class="add-btn" id="addBatchUrlsBtn">批量添加</button>
            </div>
            <p id="urlAddStatus" style="margin-top: 10px; color: var(--text-sub); font-size: 12px;"></p>
            <button class="close-btn" onclick="closeModal('urlModal')">关闭</button>
        </div>
    </div>

    <div class="modal" id="playlistModal">
        <div class="modal-content">
            <h3>播放列表</h3>
            <ul class="playlist" id="playlist"></ul>
            <button class="close-btn" onclick="closeModal('playlistModal')">关闭</button>
        </div>
    </div>
    <div class="modal" id="changelogModal">
        <div class="modal-content">
            <h3>更新日志</h3>
            <div class="changelog-content">
                <div class="changelog-item">
                    <h4>1.4 预览(Beta)</h4>
                    <ul>
                        <li>版本:b-2f267c6746
                       <li>不代表最终品质</li>
                        <li>已知bug：手机端检查更新无法回到主页</li>
                    </ul>
                </div>
            </div>
            <div class="changelog-options">
                <input type="checkbox" id="dontShowAgain">
                <label for="dontShowAgain">不再显示更新日志</label>
            </div>
            <button class="close-btn" onclick="closeChangelogModal()">关闭</button>
        </div>
    </div>
    
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <h3>设置</h3>
            <div class="settings-container">
                <div class="settings-sidebar">
                    <div class="settings-item active" data-page="playback">通用设置</div>
                    <div class="settings-item" data-page="appearance">外观设置</div>
                    <div class="settings-item" data-page="order">播放顺序</div>
                    <div class="settings-item" data-page="about">关于</div>
                </div>
                <div class="settings-content">
                    <div id="playback-settings" class="settings-page active">
                        <div class="volume-control">
                            <label>音量调节</label>
                            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="100">
                            <span id="volumeValue">100%</span>
                        </div>
                        
                        <div class="update-check">
                            <label>检查更新</label>
                            <button class="upload-btn" id="checkUpdateBtn">检查更新</button>
                            <span id="updateStatus" style="margin-left: 10px; color: var(--text-sub); font-size: 13px;"></span>
                        </div>
                    </div>
                    
                    <div id="appearance-settings" class="settings-page">
                        <div class="theme-toggle">
                            <label>主题切换(黑/白)</label>
                            <label class="theme-switch">
                                <input type="checkbox" id="themeToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="border-toggle">
                            <label>显示歌词区边框发光</label>
                            <label class="theme-switch">
                                <input type="checkbox" id="borderToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    <div id="order-settings" class="settings-page">
                        <p style="margin-bottom:10px;color:var(--text-sub);font-size:13px;">拖拽可调整顺序，关闭设置后自动保存</p>
                        <ol id="sortableList"></ol>
                    </div>
                    <div id="about-settings" class="settings-page">
                        <div class="about-content">
                            <h4>版权信息</h4>
                            <p>© iw46Team 2025</p>
                            <p>版本：1.4-preBeta(b-2f267c6746pre)</p>
                            <p>作者：iw46</p>
                            <p>Bug修复:Doubao-speed-1.6</p>
                        </div>
                    </div>
                </div>
            </div>
            <button class="close-btn" onclick="closeModal('settingsModal')">关闭</button>
        </div>
    </div>
    <!--移除的更新提示弹窗qwq-->
    <!--<div class="modal" id="updateModal">
        <div class="modal-content">
            <h3>发现新版本</h3>
            <div class="update-info">
                <p>当前版本：<span id="currentVersion">1.3</span></p>
                <p>最新版本：<span id="latestVersion"></span></p>
                <p>更新内容：<br>
                    <ul id="updateContent">
                    </ul>
                </p>
            </div>
            <div class="update-buttons">
                <button class="upload-btn" id="downloadUpdateBtn">下载更新</button>
                <button class="upload-btn" onclick="closeModal('updateModal')">稍后</button>
            </div>
        </div>
    </div>-->

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="aabbcc.js"></script>
</body>
</html>
